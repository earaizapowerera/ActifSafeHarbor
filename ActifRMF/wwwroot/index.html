<!DOCTYPE html>
<html lang="es">
<head>
    <script>
    // Detectar y configurar base path automáticamente para subdirectorios
    (function() {
        var pathname = window.location.pathname;
        var pathParts = pathname.split('/').filter(function(p) { return p; });

        // Si estamos en un subdirectorio (ej: /actiflearrmf/index.html)
        // extraer el subdirectorio base
        var basePath = '/';
        if (pathParts.length > 1 || (pathParts.length === 1 && !pathname.endsWith('.html'))) {
            // Remover el archivo .html del final si existe
            if (pathParts[pathParts.length - 1].endsWith('.html')) {
                pathParts.pop();
            }
            basePath = '/' + pathParts.join('/') + '/';
        }

        var base = document.createElement('base');
        base.href = basePath;
        document.head.appendChild(base);
    })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - ActifRMF</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/shared.css?v=2">
    <style>
        .status-card {
            transition: transform 0.2s;
            cursor: pointer;
        }
        .status-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div id="navbar-placeholder"></div>

    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-12">
                <h1><i class="fas fa-tachometer-alt"></i> Dashboard RMF - Safe Harbor</h1>
                <p class="lead">Resumen de estado por compañía y año</p>
            </div>
        </div>

        <!-- Selector de Año -->
        <div class="row mt-3">
            <div class="col-md-3">
                <label for="añoSelect" class="form-label">Año:</label>
                <select class="form-select" id="añoSelect">
                    <option value="">Cargando...</option>
                </select>
            </div>
            <div class="col-md-9 text-end">
                <label class="form-label">&nbsp;</label><br>
                <button class="btn btn-primary" id="btnRefresh">
                    <i class="fas fa-sync"></i> Actualizar
                </button>
            </div>
        </div>

        <!-- Cards de Compañías -->
        <div class="row mt-4" id="companiesContainer">
            <div class="col-12 text-center">
                <div class="spinner-border" role="status">
                    <span class="visually-hidden">Cargando...</span>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/js/shared.js?v=2"></script>
    <script src="/js/dashboard.js?v=2"></script>
</body>
</html>
